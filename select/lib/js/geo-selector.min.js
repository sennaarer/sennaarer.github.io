"use strict";(function(a){a.fn.geoSelector=function(h){var e="<div id='search-form'><input type='text' id='search' /></div>";var c="<div id='cities'><ul id='cities_list'></ul></div>";this.append(e);this.after().append(c);a("#search").after('<ul id="result"></ul>');var d="http://evildevel.com/Test/Region";var g="http://evildevel.com/Test/City";if(h){f(h)}a.getJSON(d,i);function i(l){var m=l;var k={};var j=false;a("#search").on("keyup",function(p){var q=a("#search").val();var o;if(a("#search").val().length>2){if(q in k){n=k[q]}else{var n=a.grep(m,function(r){return r[1].search(RegExp(q,"i"))!=-1});k[q]=n}if(j==false){j=true;a(document).on("click",".list-item",function(){var r=a(this).attr("region_id");b(r);a("#search").val(a(this).text());a("#result").empty();a("#cities_list").empty()})}else{a("#result").empty()}for(o in n){a("#result").append("<li class='list-item' region_id="+n[o][0]+">"+n[o][1]+"</li>")}}else{if(j){a("#result").empty()}}})}function f(j){a.getJSON(d).success(function(k){var l=k[j];a("#search").val(l[1])})}function b(j){a.getJSON(g,{region:j}).success(function(k){a.each(k,function(m,l){a("#cities_list").append("<li>"+l[1]+"</li>")})})}}})(jQuery);
//# sourceMappingURL=geo-selector.js.map
